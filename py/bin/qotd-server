#!/usr/bin/env python3

import tcp.server
import time

def rfc865handler(conn, addr):
    response = "Hello, {0}. You are using port {1}.\n".format(addr[0], addr[1])
    msg = bytes(response, 'UTF-8')
    time.sleep(1)
    conn.send(msg)

server = tcp.server.Server(9999, rfc865handler)

server.start()

try:
    server.run()
except KeyboardInterrupt:
    print("SIGINT received.")
    server.shutdown()

print("Shutting down.")
